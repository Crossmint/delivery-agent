"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@solana+codecs-data-structures@2.0.0-rc.1_typescript@5.7.3";
exports.ids = ["vendor-chunks/@solana+codecs-data-structures@2.0.0-rc.1_typescript@5.7.3"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/codecs-data-structures/dist/index.node.mjs":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/codecs-data-structures/dist/index.node.mjs ***!
  \*******************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertValidNumberOfItemsForCodec: () => (/* binding */ assertValidNumberOfItemsForCodec),\n/* harmony export */   getArrayCodec: () => (/* binding */ getArrayCodec),\n/* harmony export */   getArrayDecoder: () => (/* binding */ getArrayDecoder),\n/* harmony export */   getArrayEncoder: () => (/* binding */ getArrayEncoder),\n/* harmony export */   getBitArrayCodec: () => (/* binding */ getBitArrayCodec),\n/* harmony export */   getBitArrayDecoder: () => (/* binding */ getBitArrayDecoder),\n/* harmony export */   getBitArrayEncoder: () => (/* binding */ getBitArrayEncoder),\n/* harmony export */   getBooleanCodec: () => (/* binding */ getBooleanCodec),\n/* harmony export */   getBooleanDecoder: () => (/* binding */ getBooleanDecoder),\n/* harmony export */   getBooleanEncoder: () => (/* binding */ getBooleanEncoder),\n/* harmony export */   getBytesCodec: () => (/* binding */ getBytesCodec),\n/* harmony export */   getBytesDecoder: () => (/* binding */ getBytesDecoder),\n/* harmony export */   getBytesEncoder: () => (/* binding */ getBytesEncoder),\n/* harmony export */   getConstantCodec: () => (/* binding */ getConstantCodec),\n/* harmony export */   getConstantDecoder: () => (/* binding */ getConstantDecoder),\n/* harmony export */   getConstantEncoder: () => (/* binding */ getConstantEncoder),\n/* harmony export */   getDataEnumCodec: () => (/* binding */ getDataEnumCodec),\n/* harmony export */   getDataEnumDecoder: () => (/* binding */ getDataEnumDecoder),\n/* harmony export */   getDataEnumEncoder: () => (/* binding */ getDataEnumEncoder),\n/* harmony export */   getDiscriminatedUnionCodec: () => (/* binding */ getDiscriminatedUnionCodec),\n/* harmony export */   getDiscriminatedUnionDecoder: () => (/* binding */ getDiscriminatedUnionDecoder),\n/* harmony export */   getDiscriminatedUnionEncoder: () => (/* binding */ getDiscriminatedUnionEncoder),\n/* harmony export */   getEnumCodec: () => (/* binding */ getEnumCodec),\n/* harmony export */   getEnumDecoder: () => (/* binding */ getEnumDecoder),\n/* harmony export */   getEnumEncoder: () => (/* binding */ getEnumEncoder),\n/* harmony export */   getHiddenPrefixCodec: () => (/* binding */ getHiddenPrefixCodec),\n/* harmony export */   getHiddenPrefixDecoder: () => (/* binding */ getHiddenPrefixDecoder),\n/* harmony export */   getHiddenPrefixEncoder: () => (/* binding */ getHiddenPrefixEncoder),\n/* harmony export */   getHiddenSuffixCodec: () => (/* binding */ getHiddenSuffixCodec),\n/* harmony export */   getHiddenSuffixDecoder: () => (/* binding */ getHiddenSuffixDecoder),\n/* harmony export */   getHiddenSuffixEncoder: () => (/* binding */ getHiddenSuffixEncoder),\n/* harmony export */   getMapCodec: () => (/* binding */ getMapCodec),\n/* harmony export */   getMapDecoder: () => (/* binding */ getMapDecoder),\n/* harmony export */   getMapEncoder: () => (/* binding */ getMapEncoder),\n/* harmony export */   getNullableCodec: () => (/* binding */ getNullableCodec),\n/* harmony export */   getNullableDecoder: () => (/* binding */ getNullableDecoder),\n/* harmony export */   getNullableEncoder: () => (/* binding */ getNullableEncoder),\n/* harmony export */   getScalarEnumCodec: () => (/* binding */ getScalarEnumCodec),\n/* harmony export */   getScalarEnumDecoder: () => (/* binding */ getScalarEnumDecoder),\n/* harmony export */   getScalarEnumEncoder: () => (/* binding */ getScalarEnumEncoder),\n/* harmony export */   getSetCodec: () => (/* binding */ getSetCodec),\n/* harmony export */   getSetDecoder: () => (/* binding */ getSetDecoder),\n/* harmony export */   getSetEncoder: () => (/* binding */ getSetEncoder),\n/* harmony export */   getStructCodec: () => (/* binding */ getStructCodec),\n/* harmony export */   getStructDecoder: () => (/* binding */ getStructDecoder),\n/* harmony export */   getStructEncoder: () => (/* binding */ getStructEncoder),\n/* harmony export */   getTupleCodec: () => (/* binding */ getTupleCodec),\n/* harmony export */   getTupleDecoder: () => (/* binding */ getTupleDecoder),\n/* harmony export */   getTupleEncoder: () => (/* binding */ getTupleEncoder),\n/* harmony export */   getUnionCodec: () => (/* binding */ getUnionCodec),\n/* harmony export */   getUnionDecoder: () => (/* binding */ getUnionDecoder),\n/* harmony export */   getUnionEncoder: () => (/* binding */ getUnionEncoder),\n/* harmony export */   getUnitCodec: () => (/* binding */ getUnitCodec),\n/* harmony export */   getUnitDecoder: () => (/* binding */ getUnitDecoder),\n/* harmony export */   getUnitEncoder: () => (/* binding */ getUnitEncoder)\n/* harmony export */ });\n/* harmony import */ var _solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana/codecs-core */ \"(rsc)/./node_modules/.pnpm/@solana+codecs-core@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/codecs-core/dist/index.node.mjs\");\n/* harmony import */ var _solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @solana/codecs-numbers */ \"(rsc)/./node_modules/.pnpm/@solana+codecs-numbers@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/codecs-numbers/dist/index.node.mjs\");\n/* harmony import */ var _solana_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @solana/errors */ \"(rsc)/./node_modules/.pnpm/@solana+errors@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/errors/dist/index.node.mjs\");\n\n\n\n\n// src/array.ts\nfunction assertValidNumberOfItemsForCodec(codecDescription, expected, actual) {\n  if (expected !== actual) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS, {\n      actual,\n      codecDescription,\n      expected\n    });\n  }\n}\nfunction maxCodecSizes(sizes) {\n  return sizes.reduce(\n    (all, size) => all === null || size === null ? null : Math.max(all, size),\n    0\n  );\n}\nfunction sumCodecSizes(sizes) {\n  return sizes.reduce((all, size) => all === null || size === null ? null : all + size, 0);\n}\nfunction getFixedSize(codec) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(codec) ? codec.fixedSize : null;\n}\nfunction getMaxSize(codec) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(codec) ? codec.fixedSize : codec.maxSize ?? null;\n}\n\n// src/array.ts\nfunction getArrayEncoder(item, config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU32Encoder)();\n  const fixedSize = computeArrayLikeCodecSize(size, getFixedSize(item));\n  const maxSize = computeArrayLikeCodecSize(size, getMaxSize(item)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize !== null ? { fixedSize } : {\n      getSizeFromValue: (array) => {\n        const prefixSize = typeof size === \"object\" ? (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(array.length, size) : 0;\n        return prefixSize + [...array].reduce((all, value) => all + (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value, item), 0);\n      },\n      maxSize\n    },\n    write: (array, bytes, offset) => {\n      if (typeof size === \"number\") {\n        assertValidNumberOfItemsForCodec(\"array\", size, array.length);\n      }\n      if (typeof size === \"object\") {\n        offset = size.write(array.length, bytes, offset);\n      }\n      array.forEach((value) => {\n        offset = item.write(value, bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getArrayDecoder(item, config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU32Decoder)();\n  const itemSize = getFixedSize(item);\n  const fixedSize = computeArrayLikeCodecSize(size, itemSize);\n  const maxSize = computeArrayLikeCodecSize(size, getMaxSize(item)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize !== null ? { fixedSize } : { maxSize },\n    read: (bytes, offset) => {\n      const array = [];\n      if (typeof size === \"object\" && bytes.slice(offset).length === 0) {\n        return [array, offset];\n      }\n      if (size === \"remainder\") {\n        while (offset < bytes.length) {\n          const [value, newOffset2] = item.read(bytes, offset);\n          offset = newOffset2;\n          array.push(value);\n        }\n        return [array, offset];\n      }\n      const [resolvedSize, newOffset] = typeof size === \"number\" ? [size, offset] : size.read(bytes, offset);\n      offset = newOffset;\n      for (let i = 0; i < resolvedSize; i += 1) {\n        const [value, newOffset2] = item.read(bytes, offset);\n        offset = newOffset2;\n        array.push(value);\n      }\n      return [array, offset];\n    }\n  });\n}\nfunction getArrayCodec(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getArrayEncoder(item, config), getArrayDecoder(item, config));\n}\nfunction computeArrayLikeCodecSize(size, itemSize) {\n  if (typeof size !== \"number\") return null;\n  if (size === 0) return 0;\n  return itemSize === null ? null : itemSize * size;\n}\nfunction getBitArrayEncoder(size, config = {}) {\n  const parsedConfig = typeof config === \"boolean\" ? { backward: config } : config;\n  const backward = parsedConfig.backward ?? false;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    fixedSize: size,\n    write(value, bytes, offset) {\n      const bytesToAdd = [];\n      for (let i = 0; i < size; i += 1) {\n        let byte = 0;\n        for (let j = 0; j < 8; j += 1) {\n          const feature = Number(value[i * 8 + j] ?? 0);\n          byte |= feature << (backward ? j : 7 - j);\n        }\n        if (backward) {\n          bytesToAdd.unshift(byte);\n        } else {\n          bytesToAdd.push(byte);\n        }\n      }\n      bytes.set(bytesToAdd, offset);\n      return size;\n    }\n  });\n}\nfunction getBitArrayDecoder(size, config = {}) {\n  const parsedConfig = typeof config === \"boolean\" ? { backward: config } : config;\n  const backward = parsedConfig.backward ?? false;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    fixedSize: size,\n    read(bytes, offset) {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertByteArrayHasEnoughBytesForCodec)(\"bitArray\", size, bytes, offset);\n      const booleans = [];\n      let slice = bytes.slice(offset, offset + size);\n      slice = backward ? slice.reverse() : slice;\n      slice.forEach((byte) => {\n        for (let i = 0; i < 8; i += 1) {\n          if (backward) {\n            booleans.push(Boolean(byte & 1));\n            byte >>= 1;\n          } else {\n            booleans.push(Boolean(byte & 128));\n            byte <<= 1;\n          }\n        }\n      });\n      return [booleans, offset + size];\n    }\n  });\n}\nfunction getBitArrayCodec(size, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBitArrayEncoder(size, config), getBitArrayDecoder(size, config));\n}\nfunction getBooleanEncoder(config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)(), (value) => value ? 1 : 0);\n}\nfunction getBooleanDecoder(config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)(), (value) => Number(value) === 1);\n}\nfunction getBooleanCodec(config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBooleanEncoder(config), getBooleanDecoder(config));\n}\nfunction getBytesEncoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    getSizeFromValue: (value) => value.length,\n    write: (value, bytes, offset) => {\n      bytes.set(value, offset);\n      return offset + value.length;\n    }\n  });\n}\nfunction getBytesDecoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    read: (bytes, offset) => {\n      const slice = bytes.slice(offset);\n      return [slice, offset + slice.length];\n    }\n  });\n}\nfunction getBytesCodec() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBytesEncoder(), getBytesDecoder());\n}\nvar getBase16Decoder = () => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n  read(bytes, offset) {\n    const value = bytes.slice(offset).reduce((str, byte) => str + byte.toString(16).padStart(2, \"0\"), \"\");\n    return [value, bytes.length];\n  }\n});\nfunction getConstantEncoder(constant) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    fixedSize: constant.length,\n    write: (_, bytes, offset) => {\n      bytes.set(constant, offset);\n      return offset + constant.length;\n    }\n  });\n}\nfunction getConstantDecoder(constant) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    fixedSize: constant.length,\n    read: (bytes, offset) => {\n      const base16 = getBase16Decoder();\n      if (!(0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.containsBytes)(bytes, constant, offset)) {\n        throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_CONSTANT, {\n          constant,\n          data: bytes,\n          hexConstant: base16.decode(constant),\n          hexData: base16.decode(bytes),\n          offset\n        });\n      }\n      return [void 0, offset + constant.length];\n    }\n  });\n}\nfunction getConstantCodec(constant) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getConstantEncoder(constant), getConstantDecoder(constant));\n}\nfunction getTupleEncoder(items) {\n  const fixedSize = sumCodecSizes(items.map(getFixedSize));\n  const maxSize = sumCodecSizes(items.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize === null ? {\n      getSizeFromValue: (value) => items.map((item, index) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value[index], item)).reduce((all, one) => all + one, 0),\n      maxSize\n    } : { fixedSize },\n    write: (value, bytes, offset) => {\n      assertValidNumberOfItemsForCodec(\"tuple\", items.length, value.length);\n      items.forEach((item, index) => {\n        offset = item.write(value[index], bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getTupleDecoder(items) {\n  const fixedSize = sumCodecSizes(items.map(getFixedSize));\n  const maxSize = sumCodecSizes(items.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize === null ? { maxSize } : { fixedSize },\n    read: (bytes, offset) => {\n      const values = [];\n      items.forEach((item) => {\n        const [newValue, newOffset] = item.read(bytes, offset);\n        values.push(newValue);\n        offset = newOffset;\n      });\n      return [values, offset];\n    }\n  });\n}\nfunction getTupleCodec(items) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getTupleEncoder(items),\n    getTupleDecoder(items)\n  );\n}\nfunction getUnionEncoder(variants, getIndexFromValue) {\n  const fixedSize = getUnionFixedSize(variants);\n  const write = (variant, bytes, offset) => {\n    const index = getIndexFromValue(variant);\n    assertValidVariantIndex(variants, index);\n    return variants[index].write(variant, bytes, offset);\n  };\n  if (fixedSize !== null) {\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({ fixedSize, write });\n  }\n  const maxSize = getUnionMaxSize(variants);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...maxSize !== null ? { maxSize } : {},\n    getSizeFromValue: (variant) => {\n      const index = getIndexFromValue(variant);\n      assertValidVariantIndex(variants, index);\n      return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(variant, variants[index]);\n    },\n    write\n  });\n}\nfunction getUnionDecoder(variants, getIndexFromBytes) {\n  const fixedSize = getUnionFixedSize(variants);\n  const read = (bytes, offset) => {\n    const index = getIndexFromBytes(bytes, offset);\n    assertValidVariantIndex(variants, index);\n    return variants[index].read(bytes, offset);\n  };\n  if (fixedSize !== null) {\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({ fixedSize, read });\n  }\n  const maxSize = getUnionMaxSize(variants);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({ ...maxSize !== null ? { maxSize } : {}, read });\n}\nfunction getUnionCodec(variants, getIndexFromValue, getIndexFromBytes) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getUnionEncoder(variants, getIndexFromValue),\n    getUnionDecoder(variants, getIndexFromBytes)\n  );\n}\nfunction assertValidVariantIndex(variants, index) {\n  if (typeof variants[index] === \"undefined\") {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE, {\n      maxRange: variants.length - 1,\n      minRange: 0,\n      variant: index\n    });\n  }\n}\nfunction getUnionFixedSize(variants) {\n  if (variants.length === 0) return 0;\n  if (!(0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(variants[0])) return null;\n  const variantSize = variants[0].fixedSize;\n  const sameSizedVariants = variants.every((variant) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(variant) && variant.fixedSize === variantSize);\n  return sameSizedVariants ? variantSize : null;\n}\nfunction getUnionMaxSize(variants) {\n  return maxCodecSizes(variants.map((variant) => getMaxSize(variant)));\n}\n\n// src/discriminated-union.ts\nfunction getDiscriminatedUnionEncoder(variants, config = {}) {\n  const discriminatorProperty = config.discriminator ?? \"__kind\";\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  return getUnionEncoder(\n    variants.map(\n      ([, variant], index) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(getTupleEncoder([prefix, variant]), (value) => [index, value])\n    ),\n    (value) => getVariantDiscriminator(variants, value[discriminatorProperty])\n  );\n}\nfunction getDiscriminatedUnionDecoder(variants, config = {}) {\n  const discriminatorProperty = config.discriminator ?? \"__kind\";\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  return getUnionDecoder(\n    variants.map(\n      ([discriminator, variant]) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(getTupleDecoder([prefix, variant]), ([, value]) => ({\n        [discriminatorProperty]: discriminator,\n        ...value\n      }))\n    ),\n    (bytes, offset) => Number(prefix.read(bytes, offset)[0])\n  );\n}\nfunction getDiscriminatedUnionCodec(variants, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getDiscriminatedUnionEncoder(variants, config),\n    getDiscriminatedUnionDecoder(variants, config)\n  );\n}\nfunction getVariantDiscriminator(variants, discriminatorValue) {\n  const discriminator = variants.findIndex(([key]) => discriminatorValue === key);\n  if (discriminator < 0) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT, {\n      value: discriminatorValue,\n      variants: variants.map(([key]) => key)\n    });\n  }\n  return discriminator;\n}\nvar getDataEnumEncoder = getDiscriminatedUnionEncoder;\nvar getDataEnumDecoder = getDiscriminatedUnionDecoder;\nvar getDataEnumCodec = getDiscriminatedUnionCodec;\n\n// src/enum-helpers.ts\nfunction getEnumStats(constructor) {\n  const numericalValues = [\n    ...new Set(Object.values(constructor).filter((v) => typeof v === \"number\"))\n  ].sort();\n  const enumRecord = Object.fromEntries(Object.entries(constructor).slice(numericalValues.length));\n  const enumKeys = Object.keys(enumRecord);\n  const enumValues = Object.values(enumRecord);\n  const stringValues = [\n    .../* @__PURE__ */ new Set([...enumKeys, ...enumValues.filter((v) => typeof v === \"string\")])\n  ];\n  return { enumKeys, enumRecord, enumValues, numericalValues, stringValues };\n}\nfunction getEnumIndexFromVariant({\n  enumKeys,\n  enumValues,\n  variant\n}) {\n  const valueIndex = findLastIndex(enumValues, (value) => value === variant);\n  if (valueIndex >= 0) return valueIndex;\n  return enumKeys.findIndex((key) => key === variant);\n}\nfunction getEnumIndexFromDiscriminator({\n  discriminator,\n  enumKeys,\n  enumValues,\n  useValuesAsDiscriminators\n}) {\n  if (!useValuesAsDiscriminators) {\n    return discriminator >= 0 && discriminator < enumKeys.length ? discriminator : -1;\n  }\n  return findLastIndex(enumValues, (value) => value === discriminator);\n}\nfunction findLastIndex(array, predicate) {\n  let l = array.length;\n  while (l--) {\n    if (predicate(array[l], l, array)) return l;\n  }\n  return -1;\n}\nfunction formatNumericalValues(values) {\n  if (values.length === 0) return \"\";\n  let range = [values[0], values[0]];\n  const ranges = [];\n  for (let index = 1; index < values.length; index++) {\n    const value = values[index];\n    if (range[1] + 1 === value) {\n      range[1] = value;\n    } else {\n      ranges.push(range[0] === range[1] ? `${range[0]}` : `${range[0]}-${range[1]}`);\n      range = [value, value];\n    }\n  }\n  ranges.push(range[0] === range[1] ? `${range[0]}` : `${range[0]}-${range[1]}`);\n  return ranges.join(\", \");\n}\n\n// src/enum.ts\nfunction getEnumEncoder(constructor, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  const useValuesAsDiscriminators = config.useValuesAsDiscriminators ?? false;\n  const { enumKeys, enumValues, numericalValues, stringValues } = getEnumStats(constructor);\n  if (useValuesAsDiscriminators && enumValues.some((value) => typeof value === \"string\")) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS, {\n      stringValues: enumValues.filter((v) => typeof v === \"string\")\n    });\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(prefix, (variant) => {\n    const index = getEnumIndexFromVariant({ enumKeys, enumValues, variant });\n    if (index < 0) {\n      throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT, {\n        formattedNumericalValues: formatNumericalValues(numericalValues),\n        numericalValues,\n        stringValues,\n        variant\n      });\n    }\n    return useValuesAsDiscriminators ? enumValues[index] : index;\n  });\n}\nfunction getEnumDecoder(constructor, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  const useValuesAsDiscriminators = config.useValuesAsDiscriminators ?? false;\n  const { enumKeys, enumValues, numericalValues } = getEnumStats(constructor);\n  if (useValuesAsDiscriminators && enumValues.some((value) => typeof value === \"string\")) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS, {\n      stringValues: enumValues.filter((v) => typeof v === \"string\")\n    });\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(prefix, (value) => {\n    const discriminator = Number(value);\n    const index = getEnumIndexFromDiscriminator({\n      discriminator,\n      enumKeys,\n      enumValues,\n      useValuesAsDiscriminators\n    });\n    if (index < 0) {\n      const validDiscriminators = useValuesAsDiscriminators ? numericalValues : [...Array(enumKeys.length).keys()];\n      throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE, {\n        discriminator,\n        formattedValidDiscriminators: formatNumericalValues(validDiscriminators),\n        validDiscriminators\n      });\n    }\n    return enumValues[index];\n  });\n}\nfunction getEnumCodec(constructor, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getEnumEncoder(constructor, config), getEnumDecoder(constructor, config));\n}\nvar getScalarEnumEncoder = getEnumEncoder;\nvar getScalarEnumDecoder = getEnumDecoder;\nvar getScalarEnumCodec = getEnumCodec;\nfunction getHiddenPrefixEncoder(encoder, prefixedEncoders) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(\n    getTupleEncoder([...prefixedEncoders, encoder]),\n    (value) => [...prefixedEncoders.map(() => void 0), value]\n  );\n}\nfunction getHiddenPrefixDecoder(decoder, prefixedDecoders) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(\n    getTupleDecoder([...prefixedDecoders, decoder]),\n    (tuple) => tuple[tuple.length - 1]\n  );\n}\nfunction getHiddenPrefixCodec(codec, prefixedCodecs) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getHiddenPrefixEncoder(codec, prefixedCodecs), getHiddenPrefixDecoder(codec, prefixedCodecs));\n}\nfunction getHiddenSuffixEncoder(encoder, suffixedEncoders) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(\n    getTupleEncoder([encoder, ...suffixedEncoders]),\n    (value) => [value, ...suffixedEncoders.map(() => void 0)]\n  );\n}\nfunction getHiddenSuffixDecoder(decoder, suffixedDecoders) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(\n    getTupleDecoder([decoder, ...suffixedDecoders]),\n    (tuple) => tuple[0]\n  );\n}\nfunction getHiddenSuffixCodec(codec, suffixedCodecs) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getHiddenSuffixEncoder(codec, suffixedCodecs), getHiddenSuffixDecoder(codec, suffixedCodecs));\n}\nfunction getMapEncoder(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(\n    getArrayEncoder(getTupleEncoder([key, value]), config),\n    (map) => [...map.entries()]\n  );\n}\nfunction getMapDecoder(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(\n    getArrayDecoder(getTupleDecoder([key, value]), config),\n    (entries) => new Map(entries)\n  );\n}\nfunction getMapCodec(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getMapEncoder(key, value, config), getMapDecoder(key, value, config));\n}\nfunction getUnitEncoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    fixedSize: 0,\n    write: (_value, _bytes, offset) => offset\n  });\n}\nfunction getUnitDecoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    fixedSize: 0,\n    read: (_bytes, offset) => [void 0, offset]\n  });\n}\nfunction getUnitCodec() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getUnitEncoder(), getUnitDecoder());\n}\n\n// src/nullable.ts\nfunction getNullableEncoder(item, config = {}) {\n  const prefix = (() => {\n    if (config.prefix === null) {\n      return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(getUnitEncoder(), (_boolean) => void 0);\n    }\n    return getBooleanEncoder({ size: config.prefix ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)() });\n  })();\n  const noneValue = (() => {\n    if (config.noneValue === \"zeroes\") {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(item);\n      return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.fixEncoderSize)(getUnitEncoder(), item.fixedSize);\n    }\n    if (!config.noneValue) {\n      return getUnitEncoder();\n    }\n    return getConstantEncoder(config.noneValue);\n  })();\n  return getUnionEncoder(\n    [\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(getTupleEncoder([prefix, noneValue]), (_value) => [\n        false,\n        void 0\n      ]),\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(getTupleEncoder([prefix, item]), (value) => [true, value])\n    ],\n    (variant) => Number(variant !== null)\n  );\n}\nfunction getNullableDecoder(item, config = {}) {\n  const prefix = (() => {\n    if (config.prefix === null) {\n      return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(getUnitDecoder(), () => false);\n    }\n    return getBooleanDecoder({ size: config.prefix ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)() });\n  })();\n  const noneValue = (() => {\n    if (config.noneValue === \"zeroes\") {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(item);\n      return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.fixDecoderSize)(getUnitDecoder(), item.fixedSize);\n    }\n    if (!config.noneValue) {\n      return getUnitDecoder();\n    }\n    return getConstantDecoder(config.noneValue);\n  })();\n  return getUnionDecoder(\n    [\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(getTupleDecoder([prefix, noneValue]), () => null),\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(getTupleDecoder([prefix, item]), ([, value]) => value)\n    ],\n    (bytes, offset) => {\n      if (config.prefix === null && !config.noneValue) {\n        return Number(offset < bytes.length);\n      }\n      if (config.prefix === null && config.noneValue != null) {\n        const zeroValue = config.noneValue === \"zeroes\" ? new Uint8Array(noneValue.fixedSize).fill(0) : config.noneValue;\n        return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.containsBytes)(bytes, zeroValue, offset) ? 0 : 1;\n      }\n      return Number(prefix.read(bytes, offset)[0]);\n    }\n  );\n}\nfunction getNullableCodec(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getNullableEncoder(item, config),\n    getNullableDecoder(item, config)\n  );\n}\nfunction getSetEncoder(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformEncoder)(getArrayEncoder(item, config), (set) => [...set]);\n}\nfunction getSetDecoder(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.transformDecoder)(getArrayDecoder(item, config), (entries) => new Set(entries));\n}\nfunction getSetCodec(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getSetEncoder(item, config), getSetDecoder(item, config));\n}\nfunction getStructEncoder(fields) {\n  const fieldCodecs = fields.map(([, codec]) => codec);\n  const fixedSize = sumCodecSizes(fieldCodecs.map(getFixedSize));\n  const maxSize = sumCodecSizes(fieldCodecs.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize === null ? {\n      getSizeFromValue: (value) => fields.map(([key, codec]) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value[key], codec)).reduce((all, one) => all + one, 0),\n      maxSize\n    } : { fixedSize },\n    write: (struct, bytes, offset) => {\n      fields.forEach(([key, codec]) => {\n        offset = codec.write(struct[key], bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getStructDecoder(fields) {\n  const fieldCodecs = fields.map(([, codec]) => codec);\n  const fixedSize = sumCodecSizes(fieldCodecs.map(getFixedSize));\n  const maxSize = sumCodecSizes(fieldCodecs.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize === null ? { maxSize } : { fixedSize },\n    read: (bytes, offset) => {\n      const struct = {};\n      fields.forEach(([key, codec]) => {\n        const [value, newOffset] = codec.read(bytes, offset);\n        offset = newOffset;\n        struct[key] = value;\n      });\n      return [struct, offset];\n    }\n  });\n}\nfunction getStructCodec(fields) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getStructEncoder(fields),\n    getStructDecoder(fields)\n  );\n}\n\n\n//# sourceMappingURL=index.node.mjs.map\n//# sourceMappingURL=index.node.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNvbGFuYStjb2RlY3MtZGF0YS1zdHJ1Y3R1cmVzQDIuMC4wLXJjLjFfdHlwZXNjcmlwdEA1LjcuMy9ub2RlX21vZHVsZXMvQHNvbGFuYS9jb2RlY3MtZGF0YS1zdHJ1Y3R1cmVzL2Rpc3QvaW5kZXgubm9kZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyUDtBQUN6SjtBQUMwVDs7QUFFNVo7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBVyxDQUFDLHlGQUE2QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnRUFBVztBQUNwQjtBQUNBO0FBQ0EsU0FBUyxnRUFBVztBQUNwQjs7QUFFQTtBQUNBLDBDQUEwQztBQUMxQyw4QkFBOEIscUVBQWE7QUFDM0M7QUFDQTtBQUNBLFNBQVMsa0VBQWE7QUFDdEIsOEJBQThCLFlBQVk7QUFDMUM7QUFDQSxzREFBc0QsbUVBQWM7QUFDcEUsb0VBQW9FLG1FQUFjO0FBQ2xGLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDBDQUEwQztBQUMxQyw4QkFBOEIscUVBQWE7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrRUFBYTtBQUN0Qiw4QkFBOEIsWUFBWSxJQUFJLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtCQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFH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O0FBQ3RCLDhCQUE4QixVQUFVLElBQUksV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUyxpRUFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFeWhDO0FBQ3poQztBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZmlsaXBwb3NseW1wZXJvcG91bG9zL0RvY3VtZW50cy9Dcm9zc21pbnQvZ29hdC1tdG5kYW8tdjIvbm9kZV9tb2R1bGVzLy5wbnBtL0Bzb2xhbmErY29kZWNzLWRhdGEtc3RydWN0dXJlc0AyLjAuMC1yYy4xX3R5cGVzY3JpcHRANS43LjMvbm9kZV9tb2R1bGVzL0Bzb2xhbmEvY29kZWNzLWRhdGEtc3RydWN0dXJlcy9kaXN0L2luZGV4Lm5vZGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVuY29kZXIsIGdldEVuY29kZWRTaXplLCBjcmVhdGVEZWNvZGVyLCBjb21iaW5lQ29kZWMsIGFzc2VydEJ5dGVBcnJheUhhc0Vub3VnaEJ5dGVzRm9yQ29kZWMsIHRyYW5zZm9ybUVuY29kZXIsIHRyYW5zZm9ybURlY29kZXIsIGNvbnRhaW5zQnl0ZXMsIGlzRml4ZWRTaXplLCBhc3NlcnRJc0ZpeGVkU2l6ZSwgZml4RW5jb2RlclNpemUsIGZpeERlY29kZXJTaXplIH0gZnJvbSAnQHNvbGFuYS9jb2RlY3MtY29yZSc7XG5pbXBvcnQgeyBnZXRVMzJFbmNvZGVyLCBnZXRVMzJEZWNvZGVyLCBnZXRVOEVuY29kZXIsIGdldFU4RGVjb2RlciB9IGZyb20gJ0Bzb2xhbmEvY29kZWNzLW51bWJlcnMnO1xuaW1wb3J0IHsgU29sYW5hRXJyb3IsIFNPTEFOQV9FUlJPUl9fQ09ERUNTX19JTlZBTElEX05VTUJFUl9PRl9JVEVNUywgU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfQ09OU1RBTlQsIFNPTEFOQV9FUlJPUl9fQ09ERUNTX19VTklPTl9WQVJJQU5UX09VVF9PRl9SQU5HRSwgU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfRElTQ1JJTUlOQVRFRF9VTklPTl9WQVJJQU5ULCBTT0xBTkFfRVJST1JfX0NPREVDU19fQ0FOTk9UX1VTRV9MRVhJQ0FMX1ZBTFVFU19BU19FTlVNX0RJU0NSSU1JTkFUT1JTLCBTT0xBTkFfRVJST1JfX0NPREVDU19fSU5WQUxJRF9FTlVNX1ZBUklBTlQsIFNPTEFOQV9FUlJPUl9fQ09ERUNTX19FTlVNX0RJU0NSSU1JTkFUT1JfT1VUX09GX1JBTkdFIH0gZnJvbSAnQHNvbGFuYS9lcnJvcnMnO1xuXG4vLyBzcmMvYXJyYXkudHNcbmZ1bmN0aW9uIGFzc2VydFZhbGlkTnVtYmVyT2ZJdGVtc0ZvckNvZGVjKGNvZGVjRGVzY3JpcHRpb24sIGV4cGVjdGVkLCBhY3R1YWwpIHtcbiAgaWYgKGV4cGVjdGVkICE9PSBhY3R1YWwpIHtcbiAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfTlVNQkVSX09GX0lURU1TLCB7XG4gICAgICBhY3R1YWwsXG4gICAgICBjb2RlY0Rlc2NyaXB0aW9uLFxuICAgICAgZXhwZWN0ZWRcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gbWF4Q29kZWNTaXplcyhzaXplcykge1xuICByZXR1cm4gc2l6ZXMucmVkdWNlKFxuICAgIChhbGwsIHNpemUpID0+IGFsbCA9PT0gbnVsbCB8fCBzaXplID09PSBudWxsID8gbnVsbCA6IE1hdGgubWF4KGFsbCwgc2l6ZSksXG4gICAgMFxuICApO1xufVxuZnVuY3Rpb24gc3VtQ29kZWNTaXplcyhzaXplcykge1xuICByZXR1cm4gc2l6ZXMucmVkdWNlKChhbGwsIHNpemUpID0+IGFsbCA9PT0gbnVsbCB8fCBzaXplID09PSBudWxsID8gbnVsbCA6IGFsbCArIHNpemUsIDApO1xufVxuZnVuY3Rpb24gZ2V0Rml4ZWRTaXplKGNvZGVjKSB7XG4gIHJldHVybiBpc0ZpeGVkU2l6ZShjb2RlYykgPyBjb2RlYy5maXhlZFNpemUgOiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0TWF4U2l6ZShjb2RlYykge1xuICByZXR1cm4gaXNGaXhlZFNpemUoY29kZWMpID8gY29kZWMuZml4ZWRTaXplIDogY29kZWMubWF4U2l6ZSA/PyBudWxsO1xufVxuXG4vLyBzcmMvYXJyYXkudHNcbmZ1bmN0aW9uIGdldEFycmF5RW5jb2RlcihpdGVtLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBzaXplID0gY29uZmlnLnNpemUgPz8gZ2V0VTMyRW5jb2RlcigpO1xuICBjb25zdCBmaXhlZFNpemUgPSBjb21wdXRlQXJyYXlMaWtlQ29kZWNTaXplKHNpemUsIGdldEZpeGVkU2l6ZShpdGVtKSk7XG4gIGNvbnN0IG1heFNpemUgPSBjb21wdXRlQXJyYXlMaWtlQ29kZWNTaXplKHNpemUsIGdldE1heFNpemUoaXRlbSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSAhPT0gbnVsbCA/IHsgZml4ZWRTaXplIH0gOiB7XG4gICAgICBnZXRTaXplRnJvbVZhbHVlOiAoYXJyYXkpID0+IHtcbiAgICAgICAgY29uc3QgcHJlZml4U2l6ZSA9IHR5cGVvZiBzaXplID09PSBcIm9iamVjdFwiID8gZ2V0RW5jb2RlZFNpemUoYXJyYXkubGVuZ3RoLCBzaXplKSA6IDA7XG4gICAgICAgIHJldHVybiBwcmVmaXhTaXplICsgWy4uLmFycmF5XS5yZWR1Y2UoKGFsbCwgdmFsdWUpID0+IGFsbCArIGdldEVuY29kZWRTaXplKHZhbHVlLCBpdGVtKSwgMCk7XG4gICAgICB9LFxuICAgICAgbWF4U2l6ZVxuICAgIH0sXG4gICAgd3JpdGU6IChhcnJheSwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBzaXplID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGFzc2VydFZhbGlkTnVtYmVyT2ZJdGVtc0ZvckNvZGVjKFwiYXJyYXlcIiwgc2l6ZSwgYXJyYXkubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygc2l6ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBvZmZzZXQgPSBzaXplLndyaXRlKGFycmF5Lmxlbmd0aCwgYnl0ZXMsIG9mZnNldCk7XG4gICAgICB9XG4gICAgICBhcnJheS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICBvZmZzZXQgPSBpdGVtLndyaXRlKHZhbHVlLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0QXJyYXlEZWNvZGVyKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHNpemUgPSBjb25maWcuc2l6ZSA/PyBnZXRVMzJEZWNvZGVyKCk7XG4gIGNvbnN0IGl0ZW1TaXplID0gZ2V0Rml4ZWRTaXplKGl0ZW0pO1xuICBjb25zdCBmaXhlZFNpemUgPSBjb21wdXRlQXJyYXlMaWtlQ29kZWNTaXplKHNpemUsIGl0ZW1TaXplKTtcbiAgY29uc3QgbWF4U2l6ZSA9IGNvbXB1dGVBcnJheUxpa2VDb2RlY1NpemUoc2l6ZSwgZ2V0TWF4U2l6ZShpdGVtKSkgPz8gdm9pZCAwO1xuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplICE9PSBudWxsID8geyBmaXhlZFNpemUgfSA6IHsgbWF4U2l6ZSB9LFxuICAgIHJlYWQ6IChieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBzaXplID09PSBcIm9iamVjdFwiICYmIGJ5dGVzLnNsaWNlKG9mZnNldCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbYXJyYXksIG9mZnNldF07XG4gICAgICB9XG4gICAgICBpZiAoc2l6ZSA9PT0gXCJyZW1haW5kZXJcIikge1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgYnl0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgW3ZhbHVlLCBuZXdPZmZzZXQyXSA9IGl0ZW0ucmVhZChieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgICBvZmZzZXQgPSBuZXdPZmZzZXQyO1xuICAgICAgICAgIGFycmF5LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbYXJyYXksIG9mZnNldF07XG4gICAgICB9XG4gICAgICBjb25zdCBbcmVzb2x2ZWRTaXplLCBuZXdPZmZzZXRdID0gdHlwZW9mIHNpemUgPT09IFwibnVtYmVyXCIgPyBbc2l6ZSwgb2Zmc2V0XSA6IHNpemUucmVhZChieXRlcywgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCA9IG5ld09mZnNldDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzb2x2ZWRTaXplOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBuZXdPZmZzZXQyXSA9IGl0ZW0ucmVhZChieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ID0gbmV3T2Zmc2V0MjtcbiAgICAgICAgYXJyYXkucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2FycmF5LCBvZmZzZXRdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRBcnJheUNvZGVjKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0QXJyYXlFbmNvZGVyKGl0ZW0sIGNvbmZpZyksIGdldEFycmF5RGVjb2RlcihpdGVtLCBjb25maWcpKTtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVBcnJheUxpa2VDb2RlY1NpemUoc2l6ZSwgaXRlbVNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSBcIm51bWJlclwiKSByZXR1cm4gbnVsbDtcbiAgaWYgKHNpemUgPT09IDApIHJldHVybiAwO1xuICByZXR1cm4gaXRlbVNpemUgPT09IG51bGwgPyBudWxsIDogaXRlbVNpemUgKiBzaXplO1xufVxuZnVuY3Rpb24gZ2V0Qml0QXJyYXlFbmNvZGVyKHNpemUsIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHBhcnNlZENvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09IFwiYm9vbGVhblwiID8geyBiYWNrd2FyZDogY29uZmlnIH0gOiBjb25maWc7XG4gIGNvbnN0IGJhY2t3YXJkID0gcGFyc2VkQ29uZmlnLmJhY2t3YXJkID8/IGZhbHNlO1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZml4ZWRTaXplOiBzaXplLFxuICAgIHdyaXRlKHZhbHVlLCBieXRlcywgb2Zmc2V0KSB7XG4gICAgICBjb25zdCBieXRlc1RvQWRkID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gMSkge1xuICAgICAgICBsZXQgYnl0ZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgODsgaiArPSAxKSB7XG4gICAgICAgICAgY29uc3QgZmVhdHVyZSA9IE51bWJlcih2YWx1ZVtpICogOCArIGpdID8/IDApO1xuICAgICAgICAgIGJ5dGUgfD0gZmVhdHVyZSA8PCAoYmFja3dhcmQgPyBqIDogNyAtIGopO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiYWNrd2FyZCkge1xuICAgICAgICAgIGJ5dGVzVG9BZGQudW5zaGlmdChieXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBieXRlc1RvQWRkLnB1c2goYnl0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJ5dGVzLnNldChieXRlc1RvQWRkLCBvZmZzZXQpO1xuICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEJpdEFycmF5RGVjb2RlcihzaXplLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBwYXJzZWRDb25maWcgPSB0eXBlb2YgY29uZmlnID09PSBcImJvb2xlYW5cIiA/IHsgYmFja3dhcmQ6IGNvbmZpZyB9IDogY29uZmlnO1xuICBjb25zdCBiYWNrd2FyZCA9IHBhcnNlZENvbmZpZy5iYWNrd2FyZCA/PyBmYWxzZTtcbiAgcmV0dXJuIGNyZWF0ZURlY29kZXIoe1xuICAgIGZpeGVkU2l6ZTogc2l6ZSxcbiAgICByZWFkKGJ5dGVzLCBvZmZzZXQpIHtcbiAgICAgIGFzc2VydEJ5dGVBcnJheUhhc0Vub3VnaEJ5dGVzRm9yQ29kZWMoXCJiaXRBcnJheVwiLCBzaXplLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIGNvbnN0IGJvb2xlYW5zID0gW107XG4gICAgICBsZXQgc2xpY2UgPSBieXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIHNpemUpO1xuICAgICAgc2xpY2UgPSBiYWNrd2FyZCA/IHNsaWNlLnJldmVyc2UoKSA6IHNsaWNlO1xuICAgICAgc2xpY2UuZm9yRWFjaCgoYnl0ZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChiYWNrd2FyZCkge1xuICAgICAgICAgICAgYm9vbGVhbnMucHVzaChCb29sZWFuKGJ5dGUgJiAxKSk7XG4gICAgICAgICAgICBieXRlID4+PSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBib29sZWFucy5wdXNoKEJvb2xlYW4oYnl0ZSAmIDEyOCkpO1xuICAgICAgICAgICAgYnl0ZSA8PD0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFtib29sZWFucywgb2Zmc2V0ICsgc2l6ZV07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEJpdEFycmF5Q29kZWMoc2l6ZSwgY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhnZXRCaXRBcnJheUVuY29kZXIoc2l6ZSwgY29uZmlnKSwgZ2V0Qml0QXJyYXlEZWNvZGVyKHNpemUsIGNvbmZpZykpO1xufVxuZnVuY3Rpb24gZ2V0Qm9vbGVhbkVuY29kZXIoY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIHRyYW5zZm9ybUVuY29kZXIoY29uZmlnLnNpemUgPz8gZ2V0VThFbmNvZGVyKCksICh2YWx1ZSkgPT4gdmFsdWUgPyAxIDogMCk7XG59XG5mdW5jdGlvbiBnZXRCb29sZWFuRGVjb2Rlcihjb25maWcgPSB7fSkge1xuICByZXR1cm4gdHJhbnNmb3JtRGVjb2Rlcihjb25maWcuc2l6ZSA/PyBnZXRVOERlY29kZXIoKSwgKHZhbHVlKSA9PiBOdW1iZXIodmFsdWUpID09PSAxKTtcbn1cbmZ1bmN0aW9uIGdldEJvb2xlYW5Db2RlYyhjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEJvb2xlYW5FbmNvZGVyKGNvbmZpZyksIGdldEJvb2xlYW5EZWNvZGVyKGNvbmZpZykpO1xufVxuZnVuY3Rpb24gZ2V0Qnl0ZXNFbmNvZGVyKCkge1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhbHVlKSA9PiB2YWx1ZS5sZW5ndGgsXG4gICAgd3JpdGU6ICh2YWx1ZSwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgYnl0ZXMuc2V0KHZhbHVlLCBvZmZzZXQpO1xuICAgICAgcmV0dXJuIG9mZnNldCArIHZhbHVlLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0Qnl0ZXNEZWNvZGVyKCkge1xuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgcmVhZDogKGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGNvbnN0IHNsaWNlID0gYnl0ZXMuc2xpY2Uob2Zmc2V0KTtcbiAgICAgIHJldHVybiBbc2xpY2UsIG9mZnNldCArIHNsaWNlLmxlbmd0aF07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEJ5dGVzQ29kZWMoKSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0Qnl0ZXNFbmNvZGVyKCksIGdldEJ5dGVzRGVjb2RlcigpKTtcbn1cbnZhciBnZXRCYXNlMTZEZWNvZGVyID0gKCkgPT4gY3JlYXRlRGVjb2Rlcih7XG4gIHJlYWQoYnl0ZXMsIG9mZnNldCkge1xuICAgIGNvbnN0IHZhbHVlID0gYnl0ZXMuc2xpY2Uob2Zmc2V0KS5yZWR1Y2UoKHN0ciwgYnl0ZSkgPT4gc3RyICsgYnl0ZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpLCBcIlwiKTtcbiAgICByZXR1cm4gW3ZhbHVlLCBieXRlcy5sZW5ndGhdO1xuICB9XG59KTtcbmZ1bmN0aW9uIGdldENvbnN0YW50RW5jb2Rlcihjb25zdGFudCkge1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZml4ZWRTaXplOiBjb25zdGFudC5sZW5ndGgsXG4gICAgd3JpdGU6IChfLCBieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBieXRlcy5zZXQoY29uc3RhbnQsIG9mZnNldCk7XG4gICAgICByZXR1cm4gb2Zmc2V0ICsgY29uc3RhbnQubGVuZ3RoO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRDb25zdGFudERlY29kZXIoY29uc3RhbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZURlY29kZXIoe1xuICAgIGZpeGVkU2l6ZTogY29uc3RhbnQubGVuZ3RoLFxuICAgIHJlYWQ6IChieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBjb25zdCBiYXNlMTYgPSBnZXRCYXNlMTZEZWNvZGVyKCk7XG4gICAgICBpZiAoIWNvbnRhaW5zQnl0ZXMoYnl0ZXMsIGNvbnN0YW50LCBvZmZzZXQpKSB7XG4gICAgICAgIHRocm93IG5ldyBTb2xhbmFFcnJvcihTT0xBTkFfRVJST1JfX0NPREVDU19fSU5WQUxJRF9DT05TVEFOVCwge1xuICAgICAgICAgIGNvbnN0YW50LFxuICAgICAgICAgIGRhdGE6IGJ5dGVzLFxuICAgICAgICAgIGhleENvbnN0YW50OiBiYXNlMTYuZGVjb2RlKGNvbnN0YW50KSxcbiAgICAgICAgICBoZXhEYXRhOiBiYXNlMTYuZGVjb2RlKGJ5dGVzKSxcbiAgICAgICAgICBvZmZzZXRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3ZvaWQgMCwgb2Zmc2V0ICsgY29uc3RhbnQubGVuZ3RoXTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0Q29uc3RhbnRDb2RlYyhjb25zdGFudCkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldENvbnN0YW50RW5jb2Rlcihjb25zdGFudCksIGdldENvbnN0YW50RGVjb2Rlcihjb25zdGFudCkpO1xufVxuZnVuY3Rpb24gZ2V0VHVwbGVFbmNvZGVyKGl0ZW1zKSB7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IHN1bUNvZGVjU2l6ZXMoaXRlbXMubWFwKGdldEZpeGVkU2l6ZSkpO1xuICBjb25zdCBtYXhTaXplID0gc3VtQ29kZWNTaXplcyhpdGVtcy5tYXAoZ2V0TWF4U2l6ZSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSA9PT0gbnVsbCA/IHtcbiAgICAgIGdldFNpemVGcm9tVmFsdWU6ICh2YWx1ZSkgPT4gaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gZ2V0RW5jb2RlZFNpemUodmFsdWVbaW5kZXhdLCBpdGVtKSkucmVkdWNlKChhbGwsIG9uZSkgPT4gYWxsICsgb25lLCAwKSxcbiAgICAgIG1heFNpemVcbiAgICB9IDogeyBmaXhlZFNpemUgfSxcbiAgICB3cml0ZTogKHZhbHVlLCBieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBhc3NlcnRWYWxpZE51bWJlck9mSXRlbXNGb3JDb2RlYyhcInR1cGxlXCIsIGl0ZW1zLmxlbmd0aCwgdmFsdWUubGVuZ3RoKTtcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIG9mZnNldCA9IGl0ZW0ud3JpdGUodmFsdWVbaW5kZXhdLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VHVwbGVEZWNvZGVyKGl0ZW1zKSB7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IHN1bUNvZGVjU2l6ZXMoaXRlbXMubWFwKGdldEZpeGVkU2l6ZSkpO1xuICBjb25zdCBtYXhTaXplID0gc3VtQ29kZWNTaXplcyhpdGVtcy5tYXAoZ2V0TWF4U2l6ZSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZURlY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSA9PT0gbnVsbCA/IHsgbWF4U2l6ZSB9IDogeyBmaXhlZFNpemUgfSxcbiAgICByZWFkOiAoYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IFtuZXdWYWx1ZSwgbmV3T2Zmc2V0XSA9IGl0ZW0ucmVhZChieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgdmFsdWVzLnB1c2gobmV3VmFsdWUpO1xuICAgICAgICBvZmZzZXQgPSBuZXdPZmZzZXQ7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBbdmFsdWVzLCBvZmZzZXRdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRUdXBsZUNvZGVjKGl0ZW1zKSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoXG4gICAgZ2V0VHVwbGVFbmNvZGVyKGl0ZW1zKSxcbiAgICBnZXRUdXBsZURlY29kZXIoaXRlbXMpXG4gICk7XG59XG5mdW5jdGlvbiBnZXRVbmlvbkVuY29kZXIodmFyaWFudHMsIGdldEluZGV4RnJvbVZhbHVlKSB7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IGdldFVuaW9uRml4ZWRTaXplKHZhcmlhbnRzKTtcbiAgY29uc3Qgd3JpdGUgPSAodmFyaWFudCwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gZ2V0SW5kZXhGcm9tVmFsdWUodmFyaWFudCk7XG4gICAgYXNzZXJ0VmFsaWRWYXJpYW50SW5kZXgodmFyaWFudHMsIGluZGV4KTtcbiAgICByZXR1cm4gdmFyaWFudHNbaW5kZXhdLndyaXRlKHZhcmlhbnQsIGJ5dGVzLCBvZmZzZXQpO1xuICB9O1xuICBpZiAoZml4ZWRTaXplICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoeyBmaXhlZFNpemUsIHdyaXRlIH0pO1xuICB9XG4gIGNvbnN0IG1heFNpemUgPSBnZXRVbmlvbk1heFNpemUodmFyaWFudHMpO1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgLi4ubWF4U2l6ZSAhPT0gbnVsbCA/IHsgbWF4U2l6ZSB9IDoge30sXG4gICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhcmlhbnQpID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gZ2V0SW5kZXhGcm9tVmFsdWUodmFyaWFudCk7XG4gICAgICBhc3NlcnRWYWxpZFZhcmlhbnRJbmRleCh2YXJpYW50cywgaW5kZXgpO1xuICAgICAgcmV0dXJuIGdldEVuY29kZWRTaXplKHZhcmlhbnQsIHZhcmlhbnRzW2luZGV4XSk7XG4gICAgfSxcbiAgICB3cml0ZVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFVuaW9uRGVjb2Rlcih2YXJpYW50cywgZ2V0SW5kZXhGcm9tQnl0ZXMpIHtcbiAgY29uc3QgZml4ZWRTaXplID0gZ2V0VW5pb25GaXhlZFNpemUodmFyaWFudHMpO1xuICBjb25zdCByZWFkID0gKGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IGdldEluZGV4RnJvbUJ5dGVzKGJ5dGVzLCBvZmZzZXQpO1xuICAgIGFzc2VydFZhbGlkVmFyaWFudEluZGV4KHZhcmlhbnRzLCBpbmRleCk7XG4gICAgcmV0dXJuIHZhcmlhbnRzW2luZGV4XS5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICB9O1xuICBpZiAoZml4ZWRTaXplICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGNyZWF0ZURlY29kZXIoeyBmaXhlZFNpemUsIHJlYWQgfSk7XG4gIH1cbiAgY29uc3QgbWF4U2l6ZSA9IGdldFVuaW9uTWF4U2l6ZSh2YXJpYW50cyk7XG4gIHJldHVybiBjcmVhdGVEZWNvZGVyKHsgLi4ubWF4U2l6ZSAhPT0gbnVsbCA/IHsgbWF4U2l6ZSB9IDoge30sIHJlYWQgfSk7XG59XG5mdW5jdGlvbiBnZXRVbmlvbkNvZGVjKHZhcmlhbnRzLCBnZXRJbmRleEZyb21WYWx1ZSwgZ2V0SW5kZXhGcm9tQnl0ZXMpIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhcbiAgICBnZXRVbmlvbkVuY29kZXIodmFyaWFudHMsIGdldEluZGV4RnJvbVZhbHVlKSxcbiAgICBnZXRVbmlvbkRlY29kZXIodmFyaWFudHMsIGdldEluZGV4RnJvbUJ5dGVzKVxuICApO1xufVxuZnVuY3Rpb24gYXNzZXJ0VmFsaWRWYXJpYW50SW5kZXgodmFyaWFudHMsIGluZGV4KSB7XG4gIGlmICh0eXBlb2YgdmFyaWFudHNbaW5kZXhdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IFNvbGFuYUVycm9yKFNPTEFOQV9FUlJPUl9fQ09ERUNTX19VTklPTl9WQVJJQU5UX09VVF9PRl9SQU5HRSwge1xuICAgICAgbWF4UmFuZ2U6IHZhcmlhbnRzLmxlbmd0aCAtIDEsXG4gICAgICBtaW5SYW5nZTogMCxcbiAgICAgIHZhcmlhbnQ6IGluZGV4XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFVuaW9uRml4ZWRTaXplKHZhcmlhbnRzKSB7XG4gIGlmICh2YXJpYW50cy5sZW5ndGggPT09IDApIHJldHVybiAwO1xuICBpZiAoIWlzRml4ZWRTaXplKHZhcmlhbnRzWzBdKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHZhcmlhbnRTaXplID0gdmFyaWFudHNbMF0uZml4ZWRTaXplO1xuICBjb25zdCBzYW1lU2l6ZWRWYXJpYW50cyA9IHZhcmlhbnRzLmV2ZXJ5KCh2YXJpYW50KSA9PiBpc0ZpeGVkU2l6ZSh2YXJpYW50KSAmJiB2YXJpYW50LmZpeGVkU2l6ZSA9PT0gdmFyaWFudFNpemUpO1xuICByZXR1cm4gc2FtZVNpemVkVmFyaWFudHMgPyB2YXJpYW50U2l6ZSA6IG51bGw7XG59XG5mdW5jdGlvbiBnZXRVbmlvbk1heFNpemUodmFyaWFudHMpIHtcbiAgcmV0dXJuIG1heENvZGVjU2l6ZXModmFyaWFudHMubWFwKCh2YXJpYW50KSA9PiBnZXRNYXhTaXplKHZhcmlhbnQpKSk7XG59XG5cbi8vIHNyYy9kaXNjcmltaW5hdGVkLXVuaW9uLnRzXG5mdW5jdGlvbiBnZXREaXNjcmltaW5hdGVkVW5pb25FbmNvZGVyKHZhcmlhbnRzLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBkaXNjcmltaW5hdG9yUHJvcGVydHkgPSBjb25maWcuZGlzY3JpbWluYXRvciA/PyBcIl9fa2luZFwiO1xuICBjb25zdCBwcmVmaXggPSBjb25maWcuc2l6ZSA/PyBnZXRVOEVuY29kZXIoKTtcbiAgcmV0dXJuIGdldFVuaW9uRW5jb2RlcihcbiAgICB2YXJpYW50cy5tYXAoXG4gICAgICAoWywgdmFyaWFudF0sIGluZGV4KSA9PiB0cmFuc2Zvcm1FbmNvZGVyKGdldFR1cGxlRW5jb2RlcihbcHJlZml4LCB2YXJpYW50XSksICh2YWx1ZSkgPT4gW2luZGV4LCB2YWx1ZV0pXG4gICAgKSxcbiAgICAodmFsdWUpID0+IGdldFZhcmlhbnREaXNjcmltaW5hdG9yKHZhcmlhbnRzLCB2YWx1ZVtkaXNjcmltaW5hdG9yUHJvcGVydHldKVxuICApO1xufVxuZnVuY3Rpb24gZ2V0RGlzY3JpbWluYXRlZFVuaW9uRGVjb2Rlcih2YXJpYW50cywgY29uZmlnID0ge30pIHtcbiAgY29uc3QgZGlzY3JpbWluYXRvclByb3BlcnR5ID0gY29uZmlnLmRpc2NyaW1pbmF0b3IgPz8gXCJfX2tpbmRcIjtcbiAgY29uc3QgcHJlZml4ID0gY29uZmlnLnNpemUgPz8gZ2V0VThEZWNvZGVyKCk7XG4gIHJldHVybiBnZXRVbmlvbkRlY29kZXIoXG4gICAgdmFyaWFudHMubWFwKFxuICAgICAgKFtkaXNjcmltaW5hdG9yLCB2YXJpYW50XSkgPT4gdHJhbnNmb3JtRGVjb2RlcihnZXRUdXBsZURlY29kZXIoW3ByZWZpeCwgdmFyaWFudF0pLCAoWywgdmFsdWVdKSA9PiAoe1xuICAgICAgICBbZGlzY3JpbWluYXRvclByb3BlcnR5XTogZGlzY3JpbWluYXRvcixcbiAgICAgICAgLi4udmFsdWVcbiAgICAgIH0pKVxuICAgICksXG4gICAgKGJ5dGVzLCBvZmZzZXQpID0+IE51bWJlcihwcmVmaXgucmVhZChieXRlcywgb2Zmc2V0KVswXSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGdldERpc2NyaW1pbmF0ZWRVbmlvbkNvZGVjKHZhcmlhbnRzLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKFxuICAgIGdldERpc2NyaW1pbmF0ZWRVbmlvbkVuY29kZXIodmFyaWFudHMsIGNvbmZpZyksXG4gICAgZ2V0RGlzY3JpbWluYXRlZFVuaW9uRGVjb2Rlcih2YXJpYW50cywgY29uZmlnKVxuICApO1xufVxuZnVuY3Rpb24gZ2V0VmFyaWFudERpc2NyaW1pbmF0b3IodmFyaWFudHMsIGRpc2NyaW1pbmF0b3JWYWx1ZSkge1xuICBjb25zdCBkaXNjcmltaW5hdG9yID0gdmFyaWFudHMuZmluZEluZGV4KChba2V5XSkgPT4gZGlzY3JpbWluYXRvclZhbHVlID09PSBrZXkpO1xuICBpZiAoZGlzY3JpbWluYXRvciA8IDApIHtcbiAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfRElTQ1JJTUlOQVRFRF9VTklPTl9WQVJJQU5ULCB7XG4gICAgICB2YWx1ZTogZGlzY3JpbWluYXRvclZhbHVlLFxuICAgICAgdmFyaWFudHM6IHZhcmlhbnRzLm1hcCgoW2tleV0pID0+IGtleSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZGlzY3JpbWluYXRvcjtcbn1cbnZhciBnZXREYXRhRW51bUVuY29kZXIgPSBnZXREaXNjcmltaW5hdGVkVW5pb25FbmNvZGVyO1xudmFyIGdldERhdGFFbnVtRGVjb2RlciA9IGdldERpc2NyaW1pbmF0ZWRVbmlvbkRlY29kZXI7XG52YXIgZ2V0RGF0YUVudW1Db2RlYyA9IGdldERpc2NyaW1pbmF0ZWRVbmlvbkNvZGVjO1xuXG4vLyBzcmMvZW51bS1oZWxwZXJzLnRzXG5mdW5jdGlvbiBnZXRFbnVtU3RhdHMoY29uc3RydWN0b3IpIHtcbiAgY29uc3QgbnVtZXJpY2FsVmFsdWVzID0gW1xuICAgIC4uLm5ldyBTZXQoT2JqZWN0LnZhbHVlcyhjb25zdHJ1Y3RvcikuZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gIF0uc29ydCgpO1xuICBjb25zdCBlbnVtUmVjb3JkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNvbnN0cnVjdG9yKS5zbGljZShudW1lcmljYWxWYWx1ZXMubGVuZ3RoKSk7XG4gIGNvbnN0IGVudW1LZXlzID0gT2JqZWN0LmtleXMoZW51bVJlY29yZCk7XG4gIGNvbnN0IGVudW1WYWx1ZXMgPSBPYmplY3QudmFsdWVzKGVudW1SZWNvcmQpO1xuICBjb25zdCBzdHJpbmdWYWx1ZXMgPSBbXG4gICAgLi4uLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLmVudW1LZXlzLCAuLi5lbnVtVmFsdWVzLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpXSlcbiAgXTtcbiAgcmV0dXJuIHsgZW51bUtleXMsIGVudW1SZWNvcmQsIGVudW1WYWx1ZXMsIG51bWVyaWNhbFZhbHVlcywgc3RyaW5nVmFsdWVzIH07XG59XG5mdW5jdGlvbiBnZXRFbnVtSW5kZXhGcm9tVmFyaWFudCh7XG4gIGVudW1LZXlzLFxuICBlbnVtVmFsdWVzLFxuICB2YXJpYW50XG59KSB7XG4gIGNvbnN0IHZhbHVlSW5kZXggPSBmaW5kTGFzdEluZGV4KGVudW1WYWx1ZXMsICh2YWx1ZSkgPT4gdmFsdWUgPT09IHZhcmlhbnQpO1xuICBpZiAodmFsdWVJbmRleCA+PSAwKSByZXR1cm4gdmFsdWVJbmRleDtcbiAgcmV0dXJuIGVudW1LZXlzLmZpbmRJbmRleCgoa2V5KSA9PiBrZXkgPT09IHZhcmlhbnQpO1xufVxuZnVuY3Rpb24gZ2V0RW51bUluZGV4RnJvbURpc2NyaW1pbmF0b3Ioe1xuICBkaXNjcmltaW5hdG9yLFxuICBlbnVtS2V5cyxcbiAgZW51bVZhbHVlcyxcbiAgdXNlVmFsdWVzQXNEaXNjcmltaW5hdG9yc1xufSkge1xuICBpZiAoIXVzZVZhbHVlc0FzRGlzY3JpbWluYXRvcnMpIHtcbiAgICByZXR1cm4gZGlzY3JpbWluYXRvciA+PSAwICYmIGRpc2NyaW1pbmF0b3IgPCBlbnVtS2V5cy5sZW5ndGggPyBkaXNjcmltaW5hdG9yIDogLTE7XG4gIH1cbiAgcmV0dXJuIGZpbmRMYXN0SW5kZXgoZW51bVZhbHVlcywgKHZhbHVlKSA9PiB2YWx1ZSA9PT0gZGlzY3JpbWluYXRvcik7XG59XG5mdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgbGV0IGwgPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsLS0pIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2xdLCBsLCBhcnJheSkpIHJldHVybiBsO1xuICB9XG4gIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGZvcm1hdE51bWVyaWNhbFZhbHVlcyh2YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBsZXQgcmFuZ2UgPSBbdmFsdWVzWzBdLCB2YWx1ZXNbMF1dO1xuICBjb25zdCByYW5nZXMgPSBbXTtcbiAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpbmRleF07XG4gICAgaWYgKHJhbmdlWzFdICsgMSA9PT0gdmFsdWUpIHtcbiAgICAgIHJhbmdlWzFdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhbmdlcy5wdXNoKHJhbmdlWzBdID09PSByYW5nZVsxXSA/IGAke3JhbmdlWzBdfWAgOiBgJHtyYW5nZVswXX0tJHtyYW5nZVsxXX1gKTtcbiAgICAgIHJhbmdlID0gW3ZhbHVlLCB2YWx1ZV07XG4gICAgfVxuICB9XG4gIHJhbmdlcy5wdXNoKHJhbmdlWzBdID09PSByYW5nZVsxXSA/IGAke3JhbmdlWzBdfWAgOiBgJHtyYW5nZVswXX0tJHtyYW5nZVsxXX1gKTtcbiAgcmV0dXJuIHJhbmdlcy5qb2luKFwiLCBcIik7XG59XG5cbi8vIHNyYy9lbnVtLnRzXG5mdW5jdGlvbiBnZXRFbnVtRW5jb2Rlcihjb25zdHJ1Y3RvciwgY29uZmlnID0ge30pIHtcbiAgY29uc3QgcHJlZml4ID0gY29uZmlnLnNpemUgPz8gZ2V0VThFbmNvZGVyKCk7XG4gIGNvbnN0IHVzZVZhbHVlc0FzRGlzY3JpbWluYXRvcnMgPSBjb25maWcudXNlVmFsdWVzQXNEaXNjcmltaW5hdG9ycyA/PyBmYWxzZTtcbiAgY29uc3QgeyBlbnVtS2V5cywgZW51bVZhbHVlcywgbnVtZXJpY2FsVmFsdWVzLCBzdHJpbmdWYWx1ZXMgfSA9IGdldEVudW1TdGF0cyhjb25zdHJ1Y3Rvcik7XG4gIGlmICh1c2VWYWx1ZXNBc0Rpc2NyaW1pbmF0b3JzICYmIGVudW1WYWx1ZXMuc29tZSgodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0NBTk5PVF9VU0VfTEVYSUNBTF9WQUxVRVNfQVNfRU5VTV9ESVNDUklNSU5BVE9SUywge1xuICAgICAgc3RyaW5nVmFsdWVzOiBlbnVtVmFsdWVzLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybUVuY29kZXIocHJlZml4LCAodmFyaWFudCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gZ2V0RW51bUluZGV4RnJvbVZhcmlhbnQoeyBlbnVtS2V5cywgZW51bVZhbHVlcywgdmFyaWFudCB9KTtcbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfRU5VTV9WQVJJQU5ULCB7XG4gICAgICAgIGZvcm1hdHRlZE51bWVyaWNhbFZhbHVlczogZm9ybWF0TnVtZXJpY2FsVmFsdWVzKG51bWVyaWNhbFZhbHVlcyksXG4gICAgICAgIG51bWVyaWNhbFZhbHVlcyxcbiAgICAgICAgc3RyaW5nVmFsdWVzLFxuICAgICAgICB2YXJpYW50XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVzZVZhbHVlc0FzRGlzY3JpbWluYXRvcnMgPyBlbnVtVmFsdWVzW2luZGV4XSA6IGluZGV4O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEVudW1EZWNvZGVyKGNvbnN0cnVjdG9yLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBwcmVmaXggPSBjb25maWcuc2l6ZSA/PyBnZXRVOERlY29kZXIoKTtcbiAgY29uc3QgdXNlVmFsdWVzQXNEaXNjcmltaW5hdG9ycyA9IGNvbmZpZy51c2VWYWx1ZXNBc0Rpc2NyaW1pbmF0b3JzID8/IGZhbHNlO1xuICBjb25zdCB7IGVudW1LZXlzLCBlbnVtVmFsdWVzLCBudW1lcmljYWxWYWx1ZXMgfSA9IGdldEVudW1TdGF0cyhjb25zdHJ1Y3Rvcik7XG4gIGlmICh1c2VWYWx1ZXNBc0Rpc2NyaW1pbmF0b3JzICYmIGVudW1WYWx1ZXMuc29tZSgodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0NBTk5PVF9VU0VfTEVYSUNBTF9WQUxVRVNfQVNfRU5VTV9ESVNDUklNSU5BVE9SUywge1xuICAgICAgc3RyaW5nVmFsdWVzOiBlbnVtVmFsdWVzLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybURlY29kZXIocHJlZml4LCAodmFsdWUpID0+IHtcbiAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gTnVtYmVyKHZhbHVlKTtcbiAgICBjb25zdCBpbmRleCA9IGdldEVudW1JbmRleEZyb21EaXNjcmltaW5hdG9yKHtcbiAgICAgIGRpc2NyaW1pbmF0b3IsXG4gICAgICBlbnVtS2V5cyxcbiAgICAgIGVudW1WYWx1ZXMsXG4gICAgICB1c2VWYWx1ZXNBc0Rpc2NyaW1pbmF0b3JzXG4gICAgfSk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgY29uc3QgdmFsaWREaXNjcmltaW5hdG9ycyA9IHVzZVZhbHVlc0FzRGlzY3JpbWluYXRvcnMgPyBudW1lcmljYWxWYWx1ZXMgOiBbLi4uQXJyYXkoZW51bUtleXMubGVuZ3RoKS5rZXlzKCldO1xuICAgICAgdGhyb3cgbmV3IFNvbGFuYUVycm9yKFNPTEFOQV9FUlJPUl9fQ09ERUNTX19FTlVNX0RJU0NSSU1JTkFUT1JfT1VUX09GX1JBTkdFLCB7XG4gICAgICAgIGRpc2NyaW1pbmF0b3IsXG4gICAgICAgIGZvcm1hdHRlZFZhbGlkRGlzY3JpbWluYXRvcnM6IGZvcm1hdE51bWVyaWNhbFZhbHVlcyh2YWxpZERpc2NyaW1pbmF0b3JzKSxcbiAgICAgICAgdmFsaWREaXNjcmltaW5hdG9yc1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBlbnVtVmFsdWVzW2luZGV4XTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRFbnVtQ29kZWMoY29uc3RydWN0b3IsIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0RW51bUVuY29kZXIoY29uc3RydWN0b3IsIGNvbmZpZyksIGdldEVudW1EZWNvZGVyKGNvbnN0cnVjdG9yLCBjb25maWcpKTtcbn1cbnZhciBnZXRTY2FsYXJFbnVtRW5jb2RlciA9IGdldEVudW1FbmNvZGVyO1xudmFyIGdldFNjYWxhckVudW1EZWNvZGVyID0gZ2V0RW51bURlY29kZXI7XG52YXIgZ2V0U2NhbGFyRW51bUNvZGVjID0gZ2V0RW51bUNvZGVjO1xuZnVuY3Rpb24gZ2V0SGlkZGVuUHJlZml4RW5jb2RlcihlbmNvZGVyLCBwcmVmaXhlZEVuY29kZXJzKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1FbmNvZGVyKFxuICAgIGdldFR1cGxlRW5jb2RlcihbLi4ucHJlZml4ZWRFbmNvZGVycywgZW5jb2Rlcl0pLFxuICAgICh2YWx1ZSkgPT4gWy4uLnByZWZpeGVkRW5jb2RlcnMubWFwKCgpID0+IHZvaWQgMCksIHZhbHVlXVxuICApO1xufVxuZnVuY3Rpb24gZ2V0SGlkZGVuUHJlZml4RGVjb2RlcihkZWNvZGVyLCBwcmVmaXhlZERlY29kZXJzKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1EZWNvZGVyKFxuICAgIGdldFR1cGxlRGVjb2RlcihbLi4ucHJlZml4ZWREZWNvZGVycywgZGVjb2Rlcl0pLFxuICAgICh0dXBsZSkgPT4gdHVwbGVbdHVwbGUubGVuZ3RoIC0gMV1cbiAgKTtcbn1cbmZ1bmN0aW9uIGdldEhpZGRlblByZWZpeENvZGVjKGNvZGVjLCBwcmVmaXhlZENvZGVjcykge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEhpZGRlblByZWZpeEVuY29kZXIoY29kZWMsIHByZWZpeGVkQ29kZWNzKSwgZ2V0SGlkZGVuUHJlZml4RGVjb2Rlcihjb2RlYywgcHJlZml4ZWRDb2RlY3MpKTtcbn1cbmZ1bmN0aW9uIGdldEhpZGRlblN1ZmZpeEVuY29kZXIoZW5jb2Rlciwgc3VmZml4ZWRFbmNvZGVycykge1xuICByZXR1cm4gdHJhbnNmb3JtRW5jb2RlcihcbiAgICBnZXRUdXBsZUVuY29kZXIoW2VuY29kZXIsIC4uLnN1ZmZpeGVkRW5jb2RlcnNdKSxcbiAgICAodmFsdWUpID0+IFt2YWx1ZSwgLi4uc3VmZml4ZWRFbmNvZGVycy5tYXAoKCkgPT4gdm9pZCAwKV1cbiAgKTtcbn1cbmZ1bmN0aW9uIGdldEhpZGRlblN1ZmZpeERlY29kZXIoZGVjb2Rlciwgc3VmZml4ZWREZWNvZGVycykge1xuICByZXR1cm4gdHJhbnNmb3JtRGVjb2RlcihcbiAgICBnZXRUdXBsZURlY29kZXIoW2RlY29kZXIsIC4uLnN1ZmZpeGVkRGVjb2RlcnNdKSxcbiAgICAodHVwbGUpID0+IHR1cGxlWzBdXG4gICk7XG59XG5mdW5jdGlvbiBnZXRIaWRkZW5TdWZmaXhDb2RlYyhjb2RlYywgc3VmZml4ZWRDb2RlY3MpIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhnZXRIaWRkZW5TdWZmaXhFbmNvZGVyKGNvZGVjLCBzdWZmaXhlZENvZGVjcyksIGdldEhpZGRlblN1ZmZpeERlY29kZXIoY29kZWMsIHN1ZmZpeGVkQ29kZWNzKSk7XG59XG5mdW5jdGlvbiBnZXRNYXBFbmNvZGVyKGtleSwgdmFsdWUsIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiB0cmFuc2Zvcm1FbmNvZGVyKFxuICAgIGdldEFycmF5RW5jb2RlcihnZXRUdXBsZUVuY29kZXIoW2tleSwgdmFsdWVdKSwgY29uZmlnKSxcbiAgICAobWFwKSA9PiBbLi4ubWFwLmVudHJpZXMoKV1cbiAgKTtcbn1cbmZ1bmN0aW9uIGdldE1hcERlY29kZXIoa2V5LCB2YWx1ZSwgY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIHRyYW5zZm9ybURlY29kZXIoXG4gICAgZ2V0QXJyYXlEZWNvZGVyKGdldFR1cGxlRGVjb2Rlcihba2V5LCB2YWx1ZV0pLCBjb25maWcpLFxuICAgIChlbnRyaWVzKSA9PiBuZXcgTWFwKGVudHJpZXMpXG4gICk7XG59XG5mdW5jdGlvbiBnZXRNYXBDb2RlYyhrZXksIHZhbHVlLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldE1hcEVuY29kZXIoa2V5LCB2YWx1ZSwgY29uZmlnKSwgZ2V0TWFwRGVjb2RlcihrZXksIHZhbHVlLCBjb25maWcpKTtcbn1cbmZ1bmN0aW9uIGdldFVuaXRFbmNvZGVyKCkge1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZml4ZWRTaXplOiAwLFxuICAgIHdyaXRlOiAoX3ZhbHVlLCBfYnl0ZXMsIG9mZnNldCkgPT4gb2Zmc2V0XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VW5pdERlY29kZXIoKSB7XG4gIHJldHVybiBjcmVhdGVEZWNvZGVyKHtcbiAgICBmaXhlZFNpemU6IDAsXG4gICAgcmVhZDogKF9ieXRlcywgb2Zmc2V0KSA9PiBbdm9pZCAwLCBvZmZzZXRdXG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VW5pdENvZGVjKCkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldFVuaXRFbmNvZGVyKCksIGdldFVuaXREZWNvZGVyKCkpO1xufVxuXG4vLyBzcmMvbnVsbGFibGUudHNcbmZ1bmN0aW9uIGdldE51bGxhYmxlRW5jb2RlcihpdGVtLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBwcmVmaXggPSAoKCkgPT4ge1xuICAgIGlmIChjb25maWcucHJlZml4ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtRW5jb2RlcihnZXRVbml0RW5jb2RlcigpLCAoX2Jvb2xlYW4pID0+IHZvaWQgMCk7XG4gICAgfVxuICAgIHJldHVybiBnZXRCb29sZWFuRW5jb2Rlcih7IHNpemU6IGNvbmZpZy5wcmVmaXggPz8gZ2V0VThFbmNvZGVyKCkgfSk7XG4gIH0pKCk7XG4gIGNvbnN0IG5vbmVWYWx1ZSA9ICgoKSA9PiB7XG4gICAgaWYgKGNvbmZpZy5ub25lVmFsdWUgPT09IFwiemVyb2VzXCIpIHtcbiAgICAgIGFzc2VydElzRml4ZWRTaXplKGl0ZW0pO1xuICAgICAgcmV0dXJuIGZpeEVuY29kZXJTaXplKGdldFVuaXRFbmNvZGVyKCksIGl0ZW0uZml4ZWRTaXplKTtcbiAgICB9XG4gICAgaWYgKCFjb25maWcubm9uZVZhbHVlKSB7XG4gICAgICByZXR1cm4gZ2V0VW5pdEVuY29kZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldENvbnN0YW50RW5jb2Rlcihjb25maWcubm9uZVZhbHVlKTtcbiAgfSkoKTtcbiAgcmV0dXJuIGdldFVuaW9uRW5jb2RlcihcbiAgICBbXG4gICAgICB0cmFuc2Zvcm1FbmNvZGVyKGdldFR1cGxlRW5jb2RlcihbcHJlZml4LCBub25lVmFsdWVdKSwgKF92YWx1ZSkgPT4gW1xuICAgICAgICBmYWxzZSxcbiAgICAgICAgdm9pZCAwXG4gICAgICBdKSxcbiAgICAgIHRyYW5zZm9ybUVuY29kZXIoZ2V0VHVwbGVFbmNvZGVyKFtwcmVmaXgsIGl0ZW1dKSwgKHZhbHVlKSA9PiBbdHJ1ZSwgdmFsdWVdKVxuICAgIF0sXG4gICAgKHZhcmlhbnQpID0+IE51bWJlcih2YXJpYW50ICE9PSBudWxsKVxuICApO1xufVxuZnVuY3Rpb24gZ2V0TnVsbGFibGVEZWNvZGVyKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHByZWZpeCA9ICgoKSA9PiB7XG4gICAgaWYgKGNvbmZpZy5wcmVmaXggPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1EZWNvZGVyKGdldFVuaXREZWNvZGVyKCksICgpID0+IGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldEJvb2xlYW5EZWNvZGVyKHsgc2l6ZTogY29uZmlnLnByZWZpeCA/PyBnZXRVOERlY29kZXIoKSB9KTtcbiAgfSkoKTtcbiAgY29uc3Qgbm9uZVZhbHVlID0gKCgpID0+IHtcbiAgICBpZiAoY29uZmlnLm5vbmVWYWx1ZSA9PT0gXCJ6ZXJvZXNcIikge1xuICAgICAgYXNzZXJ0SXNGaXhlZFNpemUoaXRlbSk7XG4gICAgICByZXR1cm4gZml4RGVjb2RlclNpemUoZ2V0VW5pdERlY29kZXIoKSwgaXRlbS5maXhlZFNpemUpO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5ub25lVmFsdWUpIHtcbiAgICAgIHJldHVybiBnZXRVbml0RGVjb2RlcigpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0Q29uc3RhbnREZWNvZGVyKGNvbmZpZy5ub25lVmFsdWUpO1xuICB9KSgpO1xuICByZXR1cm4gZ2V0VW5pb25EZWNvZGVyKFxuICAgIFtcbiAgICAgIHRyYW5zZm9ybURlY29kZXIoZ2V0VHVwbGVEZWNvZGVyKFtwcmVmaXgsIG5vbmVWYWx1ZV0pLCAoKSA9PiBudWxsKSxcbiAgICAgIHRyYW5zZm9ybURlY29kZXIoZ2V0VHVwbGVEZWNvZGVyKFtwcmVmaXgsIGl0ZW1dKSwgKFssIHZhbHVlXSkgPT4gdmFsdWUpXG4gICAgXSxcbiAgICAoYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgaWYgKGNvbmZpZy5wcmVmaXggPT09IG51bGwgJiYgIWNvbmZpZy5ub25lVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihvZmZzZXQgPCBieXRlcy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbmZpZy5wcmVmaXggPT09IG51bGwgJiYgY29uZmlnLm5vbmVWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHplcm9WYWx1ZSA9IGNvbmZpZy5ub25lVmFsdWUgPT09IFwiemVyb2VzXCIgPyBuZXcgVWludDhBcnJheShub25lVmFsdWUuZml4ZWRTaXplKS5maWxsKDApIDogY29uZmlnLm5vbmVWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zQnl0ZXMoYnl0ZXMsIHplcm9WYWx1ZSwgb2Zmc2V0KSA/IDAgOiAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE51bWJlcihwcmVmaXgucmVhZChieXRlcywgb2Zmc2V0KVswXSk7XG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gZ2V0TnVsbGFibGVDb2RlYyhpdGVtLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKFxuICAgIGdldE51bGxhYmxlRW5jb2RlcihpdGVtLCBjb25maWcpLFxuICAgIGdldE51bGxhYmxlRGVjb2RlcihpdGVtLCBjb25maWcpXG4gICk7XG59XG5mdW5jdGlvbiBnZXRTZXRFbmNvZGVyKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiB0cmFuc2Zvcm1FbmNvZGVyKGdldEFycmF5RW5jb2RlcihpdGVtLCBjb25maWcpLCAoc2V0KSA9PiBbLi4uc2V0XSk7XG59XG5mdW5jdGlvbiBnZXRTZXREZWNvZGVyKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiB0cmFuc2Zvcm1EZWNvZGVyKGdldEFycmF5RGVjb2RlcihpdGVtLCBjb25maWcpLCAoZW50cmllcykgPT4gbmV3IFNldChlbnRyaWVzKSk7XG59XG5mdW5jdGlvbiBnZXRTZXRDb2RlYyhpdGVtLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldFNldEVuY29kZXIoaXRlbSwgY29uZmlnKSwgZ2V0U2V0RGVjb2RlcihpdGVtLCBjb25maWcpKTtcbn1cbmZ1bmN0aW9uIGdldFN0cnVjdEVuY29kZXIoZmllbGRzKSB7XG4gIGNvbnN0IGZpZWxkQ29kZWNzID0gZmllbGRzLm1hcCgoWywgY29kZWNdKSA9PiBjb2RlYyk7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IHN1bUNvZGVjU2l6ZXMoZmllbGRDb2RlY3MubWFwKGdldEZpeGVkU2l6ZSkpO1xuICBjb25zdCBtYXhTaXplID0gc3VtQ29kZWNTaXplcyhmaWVsZENvZGVjcy5tYXAoZ2V0TWF4U2l6ZSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSA9PT0gbnVsbCA/IHtcbiAgICAgIGdldFNpemVGcm9tVmFsdWU6ICh2YWx1ZSkgPT4gZmllbGRzLm1hcCgoW2tleSwgY29kZWNdKSA9PiBnZXRFbmNvZGVkU2l6ZSh2YWx1ZVtrZXldLCBjb2RlYykpLnJlZHVjZSgoYWxsLCBvbmUpID0+IGFsbCArIG9uZSwgMCksXG4gICAgICBtYXhTaXplXG4gICAgfSA6IHsgZml4ZWRTaXplIH0sXG4gICAgd3JpdGU6IChzdHJ1Y3QsIGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGZpZWxkcy5mb3JFYWNoKChba2V5LCBjb2RlY10pID0+IHtcbiAgICAgICAgb2Zmc2V0ID0gY29kZWMud3JpdGUoc3RydWN0W2tleV0sIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRTdHJ1Y3REZWNvZGVyKGZpZWxkcykge1xuICBjb25zdCBmaWVsZENvZGVjcyA9IGZpZWxkcy5tYXAoKFssIGNvZGVjXSkgPT4gY29kZWMpO1xuICBjb25zdCBmaXhlZFNpemUgPSBzdW1Db2RlY1NpemVzKGZpZWxkQ29kZWNzLm1hcChnZXRGaXhlZFNpemUpKTtcbiAgY29uc3QgbWF4U2l6ZSA9IHN1bUNvZGVjU2l6ZXMoZmllbGRDb2RlY3MubWFwKGdldE1heFNpemUpKSA/PyB2b2lkIDA7XG4gIHJldHVybiBjcmVhdGVEZWNvZGVyKHtcbiAgICAuLi5maXhlZFNpemUgPT09IG51bGwgPyB7IG1heFNpemUgfSA6IHsgZml4ZWRTaXplIH0sXG4gICAgcmVhZDogKGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGNvbnN0IHN0cnVjdCA9IHt9O1xuICAgICAgZmllbGRzLmZvckVhY2goKFtrZXksIGNvZGVjXSkgPT4ge1xuICAgICAgICBjb25zdCBbdmFsdWUsIG5ld09mZnNldF0gPSBjb2RlYy5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBuZXdPZmZzZXQ7XG4gICAgICAgIHN0cnVjdFtrZXldID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBbc3RydWN0LCBvZmZzZXRdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRTdHJ1Y3RDb2RlYyhmaWVsZHMpIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhcbiAgICBnZXRTdHJ1Y3RFbmNvZGVyKGZpZWxkcyksXG4gICAgZ2V0U3RydWN0RGVjb2RlcihmaWVsZHMpXG4gICk7XG59XG5cbmV4cG9ydCB7IGFzc2VydFZhbGlkTnVtYmVyT2ZJdGVtc0ZvckNvZGVjLCBnZXRBcnJheUNvZGVjLCBnZXRBcnJheURlY29kZXIsIGdldEFycmF5RW5jb2RlciwgZ2V0Qml0QXJyYXlDb2RlYywgZ2V0Qml0QXJyYXlEZWNvZGVyLCBnZXRCaXRBcnJheUVuY29kZXIsIGdldEJvb2xlYW5Db2RlYywgZ2V0Qm9vbGVhbkRlY29kZXIsIGdldEJvb2xlYW5FbmNvZGVyLCBnZXRCeXRlc0NvZGVjLCBnZXRCeXRlc0RlY29kZXIsIGdldEJ5dGVzRW5jb2RlciwgZ2V0Q29uc3RhbnRDb2RlYywgZ2V0Q29uc3RhbnREZWNvZGVyLCBnZXRDb25zdGFudEVuY29kZXIsIGdldERhdGFFbnVtQ29kZWMsIGdldERhdGFFbnVtRGVjb2RlciwgZ2V0RGF0YUVudW1FbmNvZGVyLCBnZXREaXNjcmltaW5hdGVkVW5pb25Db2RlYywgZ2V0RGlzY3JpbWluYXRlZFVuaW9uRGVjb2RlciwgZ2V0RGlzY3JpbWluYXRlZFVuaW9uRW5jb2RlciwgZ2V0RW51bUNvZGVjLCBnZXRFbnVtRGVjb2RlciwgZ2V0RW51bUVuY29kZXIsIGdldEhpZGRlblByZWZpeENvZGVjLCBnZXRIaWRkZW5QcmVmaXhEZWNvZGVyLCBnZXRIaWRkZW5QcmVmaXhFbmNvZGVyLCBnZXRIaWRkZW5TdWZmaXhDb2RlYywgZ2V0SGlkZGVuU3VmZml4RGVjb2RlciwgZ2V0SGlkZGVuU3VmZml4RW5jb2RlciwgZ2V0TWFwQ29kZWMsIGdldE1hcERlY29kZXIsIGdldE1hcEVuY29kZXIsIGdldE51bGxhYmxlQ29kZWMsIGdldE51bGxhYmxlRGVjb2RlciwgZ2V0TnVsbGFibGVFbmNvZGVyLCBnZXRTY2FsYXJFbnVtQ29kZWMsIGdldFNjYWxhckVudW1EZWNvZGVyLCBnZXRTY2FsYXJFbnVtRW5jb2RlciwgZ2V0U2V0Q29kZWMsIGdldFNldERlY29kZXIsIGdldFNldEVuY29kZXIsIGdldFN0cnVjdENvZGVjLCBnZXRTdHJ1Y3REZWNvZGVyLCBnZXRTdHJ1Y3RFbmNvZGVyLCBnZXRUdXBsZUNvZGVjLCBnZXRUdXBsZURlY29kZXIsIGdldFR1cGxlRW5jb2RlciwgZ2V0VW5pb25Db2RlYywgZ2V0VW5pb25EZWNvZGVyLCBnZXRVbmlvbkVuY29kZXIsIGdldFVuaXRDb2RlYywgZ2V0VW5pdERlY29kZXIsIGdldFVuaXRFbmNvZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5ub2RlLm1qcy5tYXBcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm5vZGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-rc.1_typescript@5.7.3/node_modules/@solana/codecs-data-structures/dist/index.node.mjs\n");

/***/ })

};
;